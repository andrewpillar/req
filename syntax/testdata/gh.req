

Stdout = open "/dev/stdout";
Stderr = open "/dev/stderr";

Endpoint = "https://api.github.com";
Token = env "GH_TOKEN";

Resp = GET {
	Authorization: "Bearer ${Token}",
	Content-Type: "application/json; charset=utf-8",
} "${Endpoint}/user" -> send;

print $Resp.Body match $Resp.StatusCode {
	200 -> yield $Stdout,
	_   -> {
		yield $Stderr;
	},
}
